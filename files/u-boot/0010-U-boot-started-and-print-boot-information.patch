From 6f1110e5cb55552204eef23009008953cdd04f4c Mon Sep 17 00:00:00 2001
From: dzhang <daniel.zhang@aviatnet.com>
Date: Mon, 18 Jan 2021 21:55:08 +1300
Subject: [PATCH] U-boot started and print boot information

---
 common/board_f.c           |  2 +-
 configs/smdkc100_defconfig | 24 ++++++++++++------------
 include/configs/smdkc100.h | 11 +++--------
 3 files changed, 16 insertions(+), 21 deletions(-)

diff --git a/common/board_f.c b/common/board_f.c
index ae3001bed1..acdf85fa55 100644
--- a/common/board_f.c
+++ b/common/board_f.c
@@ -842,7 +842,7 @@ static const init_fnc_t init_sequence_f[] = {
 #if defined(CONFIG_BOARD_POSTCLK_INIT)
 	board_postclk_init,
 #endif
-	env_init,		/* initialize environment */
+  env_init,		/* initialize environment */
 	init_baud_rate,		/* initialze baudrate settings */
 	serial_init,		/* serial communications setup */
 	console_init_f,		/* stage 1 init of console */
diff --git a/configs/smdkc100_defconfig b/configs/smdkc100_defconfig
index 8bc6758b60..d5a39ef255 100644
--- a/configs/smdkc100_defconfig
+++ b/configs/smdkc100_defconfig
@@ -3,7 +3,7 @@ CONFIG_ARCH_CPU_INIT=y
 CONFIG_ARCH_S5PC1XX=y
 CONFIG_SYS_TEXT_BASE=0x20000000
 CONFIG_NR_DRAM_BANKS=1
-CONFIG_ENV_SIZE=0x20000
+# CONFIG_ENV_SIZE=0x20000
 CONFIG_TARGET_SMDKC100=y
 CONFIG_IDENT_STRING=" for SMDKC100"
 CONFIG_DEFAULT_DEVICE_TREE="s5pc1xx-smdkc100"
@@ -14,20 +14,20 @@ CONFIG_HUSH_PARSER=y
 # CONFIG_AUTO_COMPLETE is not set
 CONFIG_SYS_PROMPT="SMDKC100 # "
 # CONFIG_CMD_FLASH is not set
-CONFIG_CMD_ONENAND=y
+# CONFIG_CMD_ONENAND=y
 # CONFIG_CMD_SETEXPR is not set
 CONFIG_CMD_CACHE=y
-CONFIG_CMD_FAT=y
-CONFIG_CMD_MTDPARTS=y
-CONFIG_MTDIDS_DEFAULT="onenand0=s3c-onenand"
-CONFIG_MTDPARTS_DEFAULT="mtdparts=s3c-onenand:256k(bootloader),128k@0x40000(params),3m@0x60000(kernel),16m@0x360000(test),-(UBI)"
-CONFIG_ENV_OVERWRITE=y
-CONFIG_ENV_IS_IN_ONENAND=y
-CONFIG_ENV_ADDR=0x40000
+# CONFIG_CMD_FAT=y
+# CONFIG_CMD_MTDPARTS=y
+# CONFIG_MTDIDS_DEFAULT="onenand0=s3c-onenand"
+# CONFIG_MTDPARTS_DEFAULT="mtdparts=s3c-onenand:256k(bootloader),128k@0x40000(params),3m@0x60000(kernel),16m@0x360000(test),-(UBI)"
+# CONFIG_ENV_OVERWRITE=y
+# CONFIG_ENV_IS_IN_ONENAND=y
+# CONFIG_ENV_ADDR=0x40000
 # CONFIG_MMC is not set
-CONFIG_MTD=y
-CONFIG_SMC911X=y
-CONFIG_SMC911X_BASE=0x98800300
+# CONFIG_MTD=y
+# CONFIG_SMC911X=y
+# CONFIG_SMC911X_BASE=0x98800300
 CONFIG_SPL=y
 CONFIG_SUPPORT_SPL=y
 # CONFIG_SPL_FRAMEWORK is not set
diff --git a/include/configs/smdkc100.h b/include/configs/smdkc100.h
index f6056832d6..506f268d0e 100644
--- a/include/configs/smdkc100.h
+++ b/include/configs/smdkc100.h
@@ -54,7 +54,7 @@
 
 #define CONFIG_COMMON_BOOT	"console=ttySAC0,115200n8" \
 				" mem=128M " \
-				" " CONFIG_MTDPARTS_DEFAULT
+				" "
 
 #define CONFIG_UPDATEB	"updateb=onenand erase 0x0 0x40000;" \
 			" onenand write 0x32008000 0x0 0x40000\0"
@@ -94,7 +94,7 @@
 		"set bootargs " CONFIG_RAMDISK_BOOT \
 		" initrd=0x33000000,8M ramdisk=8192\0" \
 	"rootfstype=cramfs\0" \
-	"mtdparts=" CONFIG_MTDPARTS_DEFAULT "\0" \
+	"mtdparts=\0" \
 	"meminfo=mem=128M\0" \
 	"nfsroot=/nfsroot/arm\0" \
 	"bootblock=5\0" \
@@ -110,7 +110,7 @@
 
 /* SMDKC100 has 1 banks of DRAM, we use only one in U-Boot */
 #define PHYS_SDRAM_1		CONFIG_SYS_SDRAM_BASE	/* SDRAM Bank #1 */
-#define PHYS_SDRAM_1_SIZE	(128 << 20)	/* 0x8000000, 128 MB Bank #1 */
+#define PHYS_SDRAM_1_SIZE	(512 << 20)	/* 0x8000000, 128 MB Bank #1 */
 
 #define CONFIG_SYS_MONITOR_BASE	0x00000000
 
@@ -134,11 +134,6 @@
  * Boot configuration
  */
 
-#define CONFIG_USE_ONENAND_BOARD_INIT
-#define CONFIG_SAMSUNG_ONENAND		1
-#define CONFIG_SYS_ONENAND_BASE		0xE7100000
-
-//#define CONFIG_SYS_INIT_SP_ADDR	(CONFIG_SYS_LOAD_ADDR - 0x1000000)
 #define CONFIG_SYS_INIT_SP_ADDR 0x40000000
 
 /*
-- 
2.30.0

